# –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –∏ —Ñ–ª–∞–≥–∏
JC = javac
JFLAGS = -encoding UTF-8
JVM = java
JVMFLAGS = -Dfile.encoding=UTF-8

# –ü—É—Ç—å –∫ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º
SRC_DIR = org/example

# –¶–µ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
all: compile

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤—Å–µ—Ö .java —Ñ–∞–π–ª–æ–≤
compile:
	@echo "üõ†  –ö–æ–º–ø–∏–ª–∏—Ä—É—é Java —Ñ–∞–π–ª—ã..."
	$(JC) $(JFLAGS) $(SRC_DIR)/*.java
	@echo "‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"

# –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã
run: compile
	@echo "üöÄ –ó–∞–ø—É—Å–∫–∞—é –ø—Ä–æ–≥—Ä–∞–º–º—É..."
	@echo "=========================="
	$(JVM) $(JVMFLAGS) -cp . org.example.Main

# –¢–µ—Å—Ç—ã
test: compile
	@echo "üß™ –ó–∞–ø—É—Å–∫–∞—é —Ç–µ—Å—Ç—ã..."
	$(JVM) $(JVMFLAGS) -cp . org.example.Test

test-decrypt: compile
	@echo "üîì –¢–µ—Å—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏..."
	$(JVM) $(JVMFLAGS) -cp . TestDecrypt

# –û—á–∏—Å—Ç–∫–∞
clean:
	@echo "üßπ –£–¥–∞–ª—è—é .class —Ñ–∞–π–ª—ã..."
	rm -f $(SRC_DIR)/*.class
	@echo "‚úÖ –û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"

.PHONY: all compile run test test-decrypt clean